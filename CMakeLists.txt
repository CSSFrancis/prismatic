cmake_minimum_required(VERSION 3.5)
project(PRISM)

set(CMAKE_CXX_STANDARD 11)

set(SOURCE_FILES main.cpp)
set(CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/cmake/modules)
add_executable(PRISM ${SOURCE_FILES})
find_package (Threads)
find_package (Boost REQUIRED)
set(SOURCE_FILES driver.cpp)
add_executable(driver ${SOURCE_FILES})
target_link_libraries(driver ${CMAKE_THREAD_LIBS_INIT} ${Boost_LIBRARY_DIRS})
include_directories(${CMAKE_SOURCE_DIR}/include ${Boost_INCLUDE_DIRS})
find_package(FFTW REQUIRED)
include_directories(FFTW_INCLUDES)
target_link_libraries(PRISM ${FFTW_LIBRARIES})
message("FFTW FOUND! Location " ${FFTW_INCLUDES})

# PRISM custom options
set(PRISM_ENABLE_GPU 0 CACHE BOOL PRISM_ENABLE_GPU)
if (PRISM_ENABLE_GPU)
    message("GPU support enabled")
endif(PRISM_ENABLE_GPU)

set(PRISM_BUILD_TESTS 0 CACHE BOOL PRISM_BUILD_TESTS)
if (PRISM_BUILD_TESTS)
    add_subdirectory(tests)
    message("Building test programs")
endif(PRISM_BUILD_TESTS)
